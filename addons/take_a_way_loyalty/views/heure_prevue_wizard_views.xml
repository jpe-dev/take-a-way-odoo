<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!-- Vue form pour le wizard d'heure prévue -->
    <record id="view_heure_prevue_wizard_form" model="ir.ui.view">
        <field name="name">heure.prevue.wizard.form</field>
        <field name="model">heure.prevue.wizard</field>
        <field name="arch" type="xml">
            <form string="Définir l'heure prévue">
                <sheet>
                    <group>
                        <field name="pos_order_id" invisible="1"/>
                        
                        <!-- Options rapides -->
                        <group string="Options rapides" col="2">
                            <field name="option_30min" widget="boolean_radio"/>
                            <field name="option_1h" widget="boolean_radio"/>
                            <field name="option_2h" widget="boolean_radio"/>
                            <field name="option_custom" widget="boolean_radio"/>
                        </group>
                        
                        <!-- Heure personnalisée - toujours visible mais contrôlée par le widget -->
                        <group string="Heure prévue">
                            <field name="heure_prevue" widget="datetime"/>
                        </group>
                    </group>
                </sheet>
                <footer>
                    <button name="action_clear" string="Effacer" type="object" class="btn-secondary"/>
                    <button name="action_confirm" string="Confirmer" type="object" class="btn-primary"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Action pour ouvrir le wizard -->
    <record id="action_heure_prevue_wizard" model="ir.actions.act_window">
        <field name="name">Définir l'heure prévue</field>
        <field name="res_model">heure.prevue.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="view_heure_prevue_wizard_form"/>
    </record>

    <!-- Action rapide pour définir l'heure prévue dans 1 heure -->
    <record id="action_heure_prevue_rapide" model="ir.actions.server">
        <field name="name">Heure prévue +1h</field>
        <field name="model_id" ref="point_of_sale.model_pos_order"/>
        <field name="state">code</field>
        <field name="code">
            if records:
                records.action_set_heure_prevue_rapide()
        </field>
    </record>

    <!-- Action pour ouvrir le wizard d'heure prévue -->
    <record id="action_heure_prevue_wizard_server" model="ir.actions.server">
        <field name="name">Définir heure prévue</field>
        <field name="model_id" ref="point_of_sale.model_pos_order"/>
        <field name="state">code</field>
        <field name="code">
            if records:
                records.action_set_heure_prevue()
        </field>
    </record>
  </data>
</odoo> 